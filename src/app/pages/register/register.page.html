<ion-content [fullscreen]="true">
  <ion-header class="ion-no-border header">
    <div>
      <ion-img
        src="../../../assets/images/ecoLogo.png"
        height="101"
        width="101"
        class="logo"
        slot="start"
      ></ion-img>
      <h2 class="logoText">Eco Munch</h2>
    </div>
    <ion-toolbar color="white">
      <ion-buttons slot="start">
        <ion-back-button
          color="primary"
          defaultHref="/login"
          aria-label="back"
          fill="clear"
          text=""
          icon="arrow-back-outline"
        ></ion-back-button>
      </ion-buttons>
    </ion-toolbar>
  </ion-header>

  <div class="page-container">
    <div class="form-container" [formGroup]="credentials">
      <ion-text>
        <h1>Register</h1>
      </ion-text>

      <div class="input-container">
        <ion-item class="ion-no-padding">
          <ion-icon name="person-outline" slot="start"></ion-icon>
          <ion-label position="floating">Name</ion-label>
          <ion-input
            type="text"
            placeholder="Enter name"
            required="true"
            clearInput="true"
            formControlName="name"
            aria-label="input name"
          ></ion-input>
        </ion-item>
        <div class="error">
          <span *ngIf="name.errors?.required && name.touched"
            >Name is required</span
          >
        </div>
      </div>

      <div class="input-container">
        <ion-item class="ion-no-padding">
          <ion-icon name="mail-outline" slot="start"></ion-icon>
          <ion-label position="floating">Email</ion-label>
          <ion-input
            type="email"
            placeholder="Enter email"
            required="true"
            clearInput="true"
            formControlName="email"
            aria-label="input email"
          ></ion-input>
        </ion-item>
        <div class="error">
          <span *ngIf="email.errors?.email && email.touched"
            >Invalid email</span
          >
          <span *ngIf="email.errors?.required && email.touched"
            >Email is required</span
          >
        </div>
      </div>

      <div class="input-container">
        <ion-item class="ion-no-padding">
          <ion-icon name="lock-closed-outline" slot="start"></ion-icon>
          <ion-label position="floating">Password</ion-label>
          <ion-input
            [type]="showPassword ? 'text' : 'password'"
            placeholder="Enter password"
            required="true"
            formControlName="password"
            aria-label="input password"
          ></ion-input>
          <ion-icon
            *ngIf="password.value && showPassword"
            name="eye-off-outline"
            slot="end"
            (click)="showPassword = !showPassword"
          ></ion-icon>
          <ion-icon
            *ngIf="password.value && !showPassword"
            name="eye-outline"
            slot="end"
            (click)="showPassword = !showPassword"
          ></ion-icon>
        </ion-item>
        <div class="error">
          <span *ngIf="password.errors?.required && password.touched"
            >Password is required</span
          >
          <span *ngIf="password.errors?.minlength && password.touched"
            >Password needs to be 6 characters</span
          >
        </div>
      </div>

      <div class="input-container">
        <ion-item class="ion-no-padding">
          <ion-icon name="lock-closed-outline" slot="start"></ion-icon>
          <ion-label position="floating">Re-enter password</ion-label>
          <ion-input
            [type]="showPassword ? 'text' : 'password'"
            placeholder="Enter password"
            required="true"
            formControlName="rePassword"
            aria-label="input rePassword"
          ></ion-input>
          <ion-icon
            *ngIf="rePassword.value && showPassword"
            name="eye-off-outline"
            slot="end"
            (click)="showPassword = !showPassword"
          ></ion-icon>
          <ion-icon
            *ngIf="rePassword.value && !showPassword"
            name="eye-outline"
            slot="end"
            (click)="showPassword = !showPassword"
          ></ion-icon>
        </ion-item>
        <div class="error">
          <span *ngIf="rePassword.errors?.minlength && rePassword.touched"
            >password needs to be 6 characters</span
          >
          <span *ngIf="credentials.errors?.notSame && rePassword.touched"
            >Passwords do not match</span
          >
        </div>
      </div>

      <ion-button
        (click)="register()"
        type="submit"
        strong="true"
        expand="block"
        shape="round"
        [disabled]="!credentials.valid"
        color="secondary"
      >
        Register
      </ion-button>
    </div>
  </div>
</ion-content>
